import { __awaiter } from "tslib";
import { interval } from 'rxjs';
import { take } from 'rxjs/operators';
/**
 * 等待方法体中的函数返回true后，再返回promise
 * @param lastMethod 返回boolean值的函数
 * @param failureMessage 错误提示消息
 * @param timeout 超时时间
 */
export const waitsFor = (lastMethod, failureMessage = '花费的时间过长，请检查判断条件', timeout = 2000) => __awaiter(void 0, void 0, void 0, function* () {
    let spentTime = 0;
    while (!lastMethod()) {
        if (spentTime > timeout) {
            throw new Error('花费的时间过长，请检查判断条件');
        }
        yield interval(25).pipe(take(1)).toPromise();
        spentTime += 25;
    }
    return Promise.resolve(true);
});
/**
 * 等待一会
 * @param timeout 中断时长
 */
export const waits = (timeout = 25) => __awaiter(void 0, void 0, void 0, function* () {
    while (timeout > 0) {
        yield interval(25).pipe(take(1)).toPromise();
        timeout -= 25;
    }
    return Promise.resolve();
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMtdGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL21vY2stYXBpL3Rlc3Rpbmcvc3JjL3V0aWxzLXRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxNQUFNLENBQUM7QUFDOUIsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBRXBDOzs7OztHQUtHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sUUFBUSxHQUFHLENBQU8sVUFBeUIsRUFBRSxjQUFjLEdBQUcsaUJBQWlCLEVBQUUsT0FBTyxHQUFHLElBQUksRUFBb0IsRUFBRTtJQUNoSSxJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7SUFDbEIsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFO1FBQ3BCLElBQUksU0FBUyxHQUFHLE9BQU8sRUFBRTtZQUN2QixNQUFNLElBQUksS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7U0FDcEM7UUFDRCxNQUFNLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDN0MsU0FBUyxJQUFJLEVBQUUsQ0FBQztLQUNqQjtJQUNELE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvQixDQUFDLENBQUEsQ0FBQztBQUVGOzs7R0FHRztBQUNILE1BQU0sQ0FBQyxNQUFNLEtBQUssR0FBRyxDQUFPLE9BQU8sR0FBRyxFQUFFLEVBQWlCLEVBQUU7SUFDekQsT0FBTyxPQUFPLEdBQUcsQ0FBQyxFQUFFO1FBQ2xCLE1BQU0sUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUM3QyxPQUFPLElBQUksRUFBRSxDQUFDO0tBQ2Y7SUFDRCxPQUFPLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUMzQixDQUFDLENBQUEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aW50ZXJ2YWx9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHt0YWtlfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbi8qKlxuICog562J5b6F5pa55rOV5L2T5Lit55qE5Ye95pWw6L+U5ZuedHJ1ZeWQju+8jOWGjei/lOWbnnByb21pc2VcbiAqIEBwYXJhbSBsYXN0TWV0aG9kIOi/lOWbnmJvb2xlYW7lgLznmoTlh73mlbBcbiAqIEBwYXJhbSBmYWlsdXJlTWVzc2FnZSDplJnor6/mj5DnpLrmtojmga9cbiAqIEBwYXJhbSB0aW1lb3V0IOi2heaXtuaXtumXtFxuICovXG5leHBvcnQgY29uc3Qgd2FpdHNGb3IgPSBhc3luYyAobGFzdE1ldGhvZDogKCkgPT4gYm9vbGVhbiwgZmFpbHVyZU1lc3NhZ2UgPSAn6Iqx6LS555qE5pe26Ze06L+H6ZW/77yM6K+35qOA5p+l5Yik5pat5p2h5Lu2JywgdGltZW91dCA9IDIwMDApOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgbGV0IHNwZW50VGltZSA9IDA7XG4gIHdoaWxlICghbGFzdE1ldGhvZCgpKSB7XG4gICAgaWYgKHNwZW50VGltZSA+IHRpbWVvdXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign6Iqx6LS555qE5pe26Ze06L+H6ZW/77yM6K+35qOA5p+l5Yik5pat5p2h5Lu2Jyk7XG4gICAgfVxuICAgIGF3YWl0IGludGVydmFsKDI1KS5waXBlKHRha2UoMSkpLnRvUHJvbWlzZSgpO1xuICAgIHNwZW50VGltZSArPSAyNTtcbiAgfVxuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xufTtcblxuLyoqXG4gKiDnrYnlvoXkuIDkvJpcbiAqIEBwYXJhbSB0aW1lb3V0IOS4reaWreaXtumVv1xuICovXG5leHBvcnQgY29uc3Qgd2FpdHMgPSBhc3luYyAodGltZW91dCA9IDI1KTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIHdoaWxlICh0aW1lb3V0ID4gMCkge1xuICAgIGF3YWl0IGludGVydmFsKDI1KS5waXBlKHRha2UoMSkpLnRvUHJvbWlzZSgpO1xuICAgIHRpbWVvdXQgLT0gMjU7XG4gIH1cbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufTtcbiJdfQ==