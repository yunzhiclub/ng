import { DelayHandlerTesting } from './delay-handler.testing';
// 集成测试请启用如下代码
import { MockApiService } from '@yunzhi/ng-mock-api';
// 开发时请启用如下代码
// import {MockApiInterceptor} from '../../../src/lib/mock-api.interceptor';
// import {MockApiService} from '../../../src/lib/mock-api.service';
/**
 * 测试专用模拟API拦截器.
 */
export class MockApiTestingInterceptor {
    /**
     * 启动时注册API
     * @param mockApis 模拟API
     */
    static forRoot(mockApis) {
        const mockApiService = MockApiService.getMockApiService(new DelayHandlerTesting());
        mockApiService.registerMockApis(mockApis);
        MockApiTestingInterceptor.mockApiService = mockApiService;
        return MockApiTestingInterceptor;
    }
    intercept(req, next) {
        return MockApiTestingInterceptor.mockApiService.request(req);
    }
}
/**
 * 此静态变量应该变到构造函数中初始化.
 * 区别：
 * 1. 属性初始化：其它文件import本文件时执行
 * 2. 构造函数：实例化时执行
 */
MockApiTestingInterceptor.mockApiService = null;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9jay1hcGkudGVzdGluZy5pbnRlcmNlcHRvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL21vY2stYXBpL3Rlc3Rpbmcvc3JjL2xpYi9tb2NrLWFwaS50ZXN0aW5nLmludGVyY2VwdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBQyxtQkFBbUIsRUFBQyxNQUFNLHlCQUF5QixDQUFDO0FBRzVELGNBQWM7QUFDZCxPQUFPLEVBQUMsY0FBYyxFQUFtQixNQUFNLHFCQUFxQixDQUFDO0FBQ3JFLGFBQWE7QUFDYiw0RUFBNEU7QUFDNUUsb0VBQW9FO0FBR3BFOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHlCQUF5QjtJQVVwQzs7O09BR0c7SUFDSCxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQWtDO1FBQy9DLE1BQU0sY0FBYyxHQUFHLGNBQWMsQ0FBQyxpQkFBaUIsQ0FDckQsSUFBSSxtQkFBbUIsRUFBRSxDQUMxQixDQUFDO1FBRUYsY0FBYyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzFDLHlCQUF5QixDQUFDLGNBQWMsR0FBRyxjQUFjLENBQUM7UUFDMUQsT0FBTyx5QkFBeUIsQ0FBQztJQUNuQyxDQUFDO0lBRUQsU0FBUyxDQUFDLEdBQXFCLEVBQUUsSUFBaUI7UUFDaEQsT0FBTyx5QkFBeUIsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFtQixHQUFHLENBQUMsQ0FBQztJQUNqRixDQUFDOztBQXhCRDs7Ozs7R0FLRztBQUNZLHdDQUFjLEdBQUcsSUFBc0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SHR0cEV2ZW50LCBIdHRwSGFuZGxlciwgSHR0cEludGVyY2VwdG9yLCBIdHRwUmVxdWVzdH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHtEZWxheUhhbmRsZXJUZXN0aW5nfSBmcm9tICcuL2RlbGF5LWhhbmRsZXIudGVzdGluZyc7XG5pbXBvcnQge1R5cGV9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG4vLyDpm4bmiJDmtYvor5Xor7flkK/nlKjlpoLkuIvku6PnoIFcbmltcG9ydCB7TW9ja0FwaVNlcnZpY2UsIE1vY2tBcGlJbnRlcmZhY2V9IGZyb20gJ0B5dW56aGkvbmctbW9jay1hcGknO1xuLy8g5byA5Y+R5pe26K+35ZCv55So5aaC5LiL5Luj56CBXG4vLyBpbXBvcnQge01vY2tBcGlJbnRlcmNlcHRvcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xpYi9tb2NrLWFwaS5pbnRlcmNlcHRvcic7XG4vLyBpbXBvcnQge01vY2tBcGlTZXJ2aWNlfSBmcm9tICcuLi8uLi8uLi9zcmMvbGliL21vY2stYXBpLnNlcnZpY2UnO1xuXG5cbi8qKlxuICog5rWL6K+V5LiT55So5qih5oufQVBJ5oum5oiq5ZmoLlxuICovXG5leHBvcnQgY2xhc3MgTW9ja0FwaVRlc3RpbmdJbnRlcmNlcHRvciBpbXBsZW1lbnRzIEh0dHBJbnRlcmNlcHRvciB7XG5cbiAgLyoqXG4gICAqIOatpOmdmeaAgeWPmOmHj+W6lOivpeWPmOWIsOaehOmAoOWHveaVsOS4reWIneWni+WMli5cbiAgICog5Yy65Yir77yaXG4gICAqIDEuIOWxnuaAp+WIneWni+WMlu+8muWFtuWug+aWh+S7tmltcG9ydOacrOaWh+S7tuaXtuaJp+ihjFxuICAgKiAyLiDmnoTpgKDlh73mlbDvvJrlrp7kvovljJbml7bmiafooYxcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIG1vY2tBcGlTZXJ2aWNlID0gbnVsbCBhcyBNb2NrQXBpU2VydmljZTtcblxuICAvKipcbiAgICog5ZCv5Yqo5pe25rOo5YaMQVBJXG4gICAqIEBwYXJhbSBtb2NrQXBpcyDmqKHmi59BUElcbiAgICovXG4gIHN0YXRpYyBmb3JSb290KG1vY2tBcGlzOiBUeXBlPE1vY2tBcGlJbnRlcmZhY2U+W10pOiBUeXBlPEh0dHBJbnRlcmNlcHRvcj4ge1xuICAgIGNvbnN0IG1vY2tBcGlTZXJ2aWNlID0gTW9ja0FwaVNlcnZpY2UuZ2V0TW9ja0FwaVNlcnZpY2UoXG4gICAgICBuZXcgRGVsYXlIYW5kbGVyVGVzdGluZygpXG4gICAgKTtcblxuICAgIG1vY2tBcGlTZXJ2aWNlLnJlZ2lzdGVyTW9ja0FwaXMobW9ja0FwaXMpO1xuICAgIE1vY2tBcGlUZXN0aW5nSW50ZXJjZXB0b3IubW9ja0FwaVNlcnZpY2UgPSBtb2NrQXBpU2VydmljZTtcbiAgICByZXR1cm4gTW9ja0FwaVRlc3RpbmdJbnRlcmNlcHRvcjtcbiAgfVxuXG4gIGludGVyY2VwdChyZXE6IEh0dHBSZXF1ZXN0PGFueT4sIG5leHQ6IEh0dHBIYW5kbGVyKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj4ge1xuICAgIHJldHVybiBNb2NrQXBpVGVzdGluZ0ludGVyY2VwdG9yLm1vY2tBcGlTZXJ2aWNlLnJlcXVlc3Q8SHR0cFJlcXVlc3Q8YW55Pj4ocmVxKTtcbiAgfVxufVxuIl19
