import { DelayHandler } from './delay-handler';
import { MockApiService } from './mock-api.service';
/**
 * 模拟拦截器.
 */
export class MockApiInterceptor {
    /**
     * 启动时注册API
     * @param mockApis 模拟API
     */
    static forRoot(mockApis) {
        const mockApiService = MockApiService.getMockApiService(new DelayHandler());
        mockApiService.registerMockApis(mockApis);
        MockApiInterceptor.mockApiService = mockApiService;
        return MockApiInterceptor;
    }
    intercept(req, next) {
        return MockApiInterceptor.mockApiService.request(req);
    }
}
/**
 * 此静态变量应该变到构造函数中初始化.
 * 区别：
 * 1. 属性初始化：其它文件import本文件时执行
 * 2. 构造函数：实例化时执行
 */
MockApiInterceptor.mockApiService = null;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9jay1hcGkuaW50ZXJjZXB0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tb2NrLWFwaS9zcmMvbGliL21vY2stYXBpLmludGVyY2VwdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUM3QyxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFJbEQ7O0dBRUc7QUFDSCxNQUFNLE9BQU8sa0JBQWtCO0lBUzdCOzs7T0FHRztJQUNILE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBa0M7UUFDL0MsTUFBTSxjQUFjLEdBQUcsY0FBYyxDQUFDLGlCQUFpQixDQUNyRCxJQUFJLFlBQVksRUFBRSxDQUNuQixDQUFDO1FBRUYsY0FBYyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzFDLGtCQUFrQixDQUFDLGNBQWMsR0FBRyxjQUFjLENBQUM7UUFDbkQsT0FBTyxrQkFBa0IsQ0FBQztJQUM1QixDQUFDO0lBRUQsU0FBUyxDQUFDLEdBQXFCLEVBQUUsSUFBaUI7UUFDaEQsT0FBTyxrQkFBa0IsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFtQixHQUFHLENBQUMsQ0FBQztJQUMxRSxDQUFDOztBQXhCRDs7Ozs7R0FLRztBQUNZLGlDQUFjLEdBQUcsSUFBc0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SHR0cEV2ZW50LCBIdHRwSGFuZGxlciwgSHR0cEludGVyY2VwdG9yLCBIdHRwUmVxdWVzdH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tICdyeGpzJztcbmltcG9ydCB7RGVsYXlIYW5kbGVyfSBmcm9tICcuL2RlbGF5LWhhbmRsZXInO1xuaW1wb3J0IHtNb2NrQXBpU2VydmljZX0gZnJvbSAnLi9tb2NrLWFwaS5zZXJ2aWNlJztcbmltcG9ydCB7VHlwZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge01vY2tBcGlJbnRlcmZhY2V9IGZyb20gJy4vbW9jay1hcGkuaW50ZXJmYWNlJztcblxuLyoqXG4gKiDmqKHmi5/mi6bmiKrlmaguXG4gKi9cbmV4cG9ydCBjbGFzcyBNb2NrQXBpSW50ZXJjZXB0b3IgaW1wbGVtZW50cyBIdHRwSW50ZXJjZXB0b3Ige1xuICAvKipcbiAgICog5q2k6Z2Z5oCB5Y+Y6YeP5bqU6K+l5Y+Y5Yiw5p6E6YCg5Ye95pWw5Lit5Yid5aeL5YyWLlxuICAgKiDljLrliKvvvJpcbiAgICogMS4g5bGe5oCn5Yid5aeL5YyW77ya5YW25a6D5paH5Lu2aW1wb3J05pys5paH5Lu25pe25omn6KGMXG4gICAqIDIuIOaehOmAoOWHveaVsO+8muWunuS+i+WMluaXtuaJp+ihjFxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgbW9ja0FwaVNlcnZpY2UgPSBudWxsIGFzIE1vY2tBcGlTZXJ2aWNlO1xuXG4gIC8qKlxuICAgKiDlkK/liqjml7bms6jlhoxBUElcbiAgICogQHBhcmFtIG1vY2tBcGlzIOaooeaLn0FQSVxuICAgKi9cbiAgc3RhdGljIGZvclJvb3QobW9ja0FwaXM6IFR5cGU8TW9ja0FwaUludGVyZmFjZT5bXSk6IFR5cGU8SHR0cEludGVyY2VwdG9yPiB7XG4gICAgY29uc3QgbW9ja0FwaVNlcnZpY2UgPSBNb2NrQXBpU2VydmljZS5nZXRNb2NrQXBpU2VydmljZShcbiAgICAgIG5ldyBEZWxheUhhbmRsZXIoKVxuICAgICk7XG5cbiAgICBtb2NrQXBpU2VydmljZS5yZWdpc3Rlck1vY2tBcGlzKG1vY2tBcGlzKTtcbiAgICBNb2NrQXBpSW50ZXJjZXB0b3IubW9ja0FwaVNlcnZpY2UgPSBtb2NrQXBpU2VydmljZTtcbiAgICByZXR1cm4gTW9ja0FwaUludGVyY2VwdG9yO1xuICB9XG5cbiAgaW50ZXJjZXB0KHJlcTogSHR0cFJlcXVlc3Q8YW55PiwgbmV4dDogSHR0cEhhbmRsZXIpOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PiB7XG4gICAgcmV0dXJuIE1vY2tBcGlJbnRlcmNlcHRvci5tb2NrQXBpU2VydmljZS5yZXF1ZXN0PEh0dHBSZXF1ZXN0PGFueT4+KHJlcSk7XG4gIH1cbn1cbiJdfQ==
